---
import Layout from '../../layouts/Layout.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
---

<Layout title="Blog | My Site">
  <h1 class="text-2xl font-bold mb-8">Blog</h1>
  <ul class="space-y-8">
    {posts.map(post => (
      <li>
        <a href={`/blog/${post.id}`} class="group block">
          <p class="font-medium text-lg group-hover:text-gray-500 transition-colors">
            {post.data.title}
          </p>
          <p class="text-sm text-gray-500 mt-1">{post.data.description}</p>
          <p class="text-xs text-gray-400 mt-2">
            {post.data.pubDate.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' })}
          </p>
        </a>
      </li>
    ))}
  </ul>
</Layout>
