---
import Layout from '../layouts/Layout.astro'
import PawIcon from '../components/PawIcon.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3)
---

<Layout title="My Site">
  <!-- Hero -->
  <section
    class="relative overflow-hidden"
    style="background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 64 64'%3E%3Cg fill='%23a3b54a' opacity='0.04'%3E%3Cellipse cx='32' cy='46' rx='14' ry='11'/%3E%3Ccircle cx='14' cy='30' r='7'/%3E%3Ccircle cx='29' cy='22' r='7'/%3E%3Ccircle cx='44' cy='22' r='7'/%3E%3Ccircle cx='50' cy='34' r='7'/%3E%3C/g%3E%3C/svg%3E\");"
  >
    <div class="max-w-5xl mx-auto px-8 py-24 relative">
      <!-- 装飾肉球 -->
      <PawIcon class="absolute top-10 right-24 w-16 h-16 text-brand opacity-10 rotate-12" />
      <PawIcon class="absolute bottom-16 right-10 w-10 h-10 text-brand opacity-10 -rotate-20" />
      <PawIcon class="absolute top-1/2 right-48 w-7 h-7 text-brand opacity-10 rotate-45" />

      <p class="text-sm text-muted mb-4 tracking-widest uppercase font-semibold">Portfolio</p>
      <h1 class="text-6xl font-extrabold text-brand mb-6 leading-tight">Your Name</h1>
      <p class="text-lg text-text/70 max-w-md leading-relaxed mb-10 font-medium">
        こんにちは。Web 開発が好きなエンジニアです。
        技術的なことや日々の学びを発信しています。
      </p>
      <div class="flex gap-4">
        <a
          href="/blog"
          class="px-6 py-3 bg-brand text-bg font-bold rounded-2xl text-sm hover:bg-brand/90 transition-colors"
        >
          Blog を読む →
        </a>
        <a
          href="https://github.com"
          class="px-6 py-3 border border-border text-text font-bold rounded-2xl text-sm hover:border-brand hover:text-brand transition-colors"
        >
          GitHub
        </a>
      </div>
    </div>
  </section>

  <!-- Skills -->
  <section class="border-t border-border">
    <div class="max-w-5xl mx-auto px-8 py-16">
      <p class="text-sm text-muted tracking-widest uppercase mb-8 font-semibold">Skills</p>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        {[
          { name: 'TypeScript', desc: '型安全な開発' },
          { name: 'React / Next.js', desc: 'フロントエンド' },
          { name: 'Astro', desc: '静的サイト' },
          { name: 'Tailwind CSS', desc: 'スタイリング' },
          { name: 'Node.js', desc: 'バックエンド' },
          { name: 'Git / GitHub', desc: 'バージョン管理' },
        ].map(skill => (
          <div class="bg-surface border border-border rounded-2xl p-5 hover:border-brand/60 transition-colors">
            <p class="font-bold text-text text-sm">{skill.name}</p>
            <p class="text-muted text-xs mt-1 font-medium">{skill.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Recent Posts -->
  <section class="border-t border-border">
    <div class="max-w-5xl mx-auto px-8 py-16">
      <div class="flex items-center justify-between mb-8">
        <p class="text-sm text-muted tracking-widest uppercase font-semibold">Recent Posts</p>
        <a href="/blog" class="text-xs text-brand hover:opacity-70 transition-opacity font-bold">
          すべて見る →
        </a>
      </div>
      <ul class="space-y-3">
        {posts.map(post => (
          <li>
            <a
              href={`/blog/${post.id}`}
              class="group flex items-center justify-between bg-surface border border-border rounded-2xl px-5 py-4 hover:border-brand/60 transition-colors"
            >
              <span class="text-sm text-text group-hover:text-brand transition-colors font-bold">
                {post.data.title}
              </span>
              <span class="text-xs text-muted ml-4 shrink-0 font-medium">
                {post.data.pubDate.toLocaleDateString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit' })}
              </span>
            </a>
          </li>
        ))}
      </ul>
    </div>
  </section>
</Layout>
